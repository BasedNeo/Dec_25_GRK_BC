# Pre-Deployment Testing Protocol

Run this ENTIRE checklist before every production deployment. Check off each item.

## ðŸ”´ CRITICAL TESTS (Must Pass)

### Minting Flow
- [ ] **Connect wallet** - RainbowKit modal opens, connects successfully
- [ ] **Check mint price display** - Shows exactly 69,420 $BASED
- [ ] **Check balance display** - Shows correct $BASED balance
- [ ] **Check max affordable** - Correctly calculates how many NFTs you can mint
- [ ] **Mint 1 NFT with sufficient balance** - Transaction succeeds
- [ ] **Verify mint cost** - Exactly 69,420 $BASED was charged (check wallet)
- [ ] **Verify NFT received** - New NFT appears in Portfolio tab
- [ ] **Try mint with insufficient balance** - Shows clear error: "Insufficient balance. Need X $BASED"
- [ ] **Check sold out scenario** - If at max supply (3,732), shows "SOLD OUT"

### Marketplace Flow - Listing
- [ ] **Navigate to Portfolio tab** - Shows your owned NFTs
- [ ] **Click "List for Sale" on owned NFT**
- [ ] **Enter price: 100000** - Accepts input
- [ ] **Click "List NFT"** - Transaction sends
- [ ] **Verify listing appears** - NFT shows up in Market tab with correct price
- [ ] **Check "Unlisted" state** - Can delist the NFT
- [ ] **Delist NFT** - Transaction succeeds, NFT removed from Market

### Marketplace Flow - Buying
- [ ] **Navigate to Market tab** - Shows listed NFTs
- [ ] **Find a listed NFT** - Shows price, owner, token ID
- [ ] **Check pre-flight validation** - If insufficient balance, shows error before transaction
- [ ] **Buy NFT with sufficient balance** - Transaction succeeds
- [ ] **Verify NFT transferred** - NFT appears in your Portfolio
- [ ] **Verify payment sent** - Correct $BASED amount deducted from wallet
- [ ] **Verify seller received payment** - Check seller's wallet balance increased

### Offers Flow
- [ ] **Navigate to Market tab** - Find an NFT
- [ ] **Click "Make Offer"** - Modal opens
- [ ] **Enter offer amount: 50000** - Accepts input
- [ ] **Select duration: 24 hours**
- [ ] **Submit offer** - Transaction succeeds (if holding NFT)
- [ ] **Verify offer appears** - Shows in "My Offers" section
- [ ] **Cancel offer** - Transaction succeeds, $BASED returned
- [ ] **Check NFT gate** - Without holding NFT, offer button disabled or shows error

### Activity Feed
- [ ] **Navigate to Activity tab**
- [ ] **Check recent mints** - Shows mints from last 5.7 days
- [ ] **Check recent sales** - Shows sales with prices
- [ ] **Check recent listings** - Shows new listings
- [ ] **Check timestamps** - "5m ago", "2h ago" are accurate
- [ ] **Check event count** - Status bar shows "X events"
- [ ] **Click refresh** - Fetches new data
- [ ] **Check console logs** - Shows `[ActivityFeed] Fetched X transfers, Y listings, Z sales`

### Custom Names
- [ ] **Navigate to Stats tab**
- [ ] **Click "Set Name"** - Input field appears
- [ ] **Enter name: TestName123** - Accepts alphanumeric, underscore, hyphen
- [ ] **Try invalid characters: Test@Name** - Auto-removes @ symbol
- [ ] **Check name availability** - Shows green check if available
- [ ] **Try taken name** - Shows red X "already taken"
- [ ] **Save available name (first time)** - Shows disclaimer popup
- [ ] **Accept disclaimer** - Name saves successfully
- [ ] **Verify name display** - Shows as "TestName123#XXXX" (wallet suffix)
- [ ] **Change existing name** - No disclaimer, saves directly

### Game (Guardian Defender)
- [ ] **Navigate to /game**
- [ ] **Check NFT gate** - Shows "You need a Guardian NFT to play" if no NFT
- [ ] **With NFT: Click "Start Game"** - Game loads
- [ ] **Play through level 1** - Ship moves, aliens spawn, can shoot
- [ ] **Get hit by alien** - Lose life, respawn or game over
- [ ] **Complete level 1** - Advances to level 2
- [ ] **Check score submission** - At game over, score submits
- [ ] **Check leaderboard** - Score appears in leaderboard
- [ ] **Try playing 51+ times in 24 hours** - Shows "Daily limit reached"

### Profile & Stats
- [ ] **Navigate to Stats tab**
- [ ] **Check stats display** - Shows NFTs owned, games played, offers made
- [ ] **Check Diamond Hands** - If haven't sold any NFTs, shows Diamond Hands badge
- [ ] **Check pages visited tracker** - Increments when visiting new tabs

## ðŸŸ¡ IMPORTANT TESTS

### Wallet Connection
- [ ] **Disconnect wallet** - Successfully disconnects
- [ ] **Reconnect** - Reconnects and loads profile
- [ ] **Switch wallets** - Handles wallet change correctly
- [ ] **Wrong network** - Shows "Switch to BasedAI Network" banner

### Security & Rate Limiting
- [ ] **Spam API endpoint** - Make 25 requests to `/api/profile/login` rapidly
- [ ] **Check rate limit** - Should get 429 "Too many requests" after ~10 requests
- [ ] **Check game limit** - Try submitting 51 scores in 24 hours, blocked after 50
- [ ] **Check button locks** - Rapidly click "Buy NFT" 10 times, only 1 transaction sends

### Error Handling
- [ ] **Disconnect internet** - Shows connection error, not blank screen
- [ ] **Reconnect internet** - App recovers automatically
- [ ] **RPC failure simulation** - If one RPC down, app uses backup RPC
- [ ] **Transaction rejection** - Reject transaction in wallet, shows error message (not crash)
- [ ] **Insufficient gas** - Transaction with too low gas shows clear error

### Memory & Performance
- [ ] **Open browser console** - Type `TimerManager.getActiveCount()`
- [ ] **Check timer count** - Should be < 20 active timers
- [ ] **Navigate between tabs 20 times rapidly** - Hub â†’ Activity â†’ Market â†’ Stats