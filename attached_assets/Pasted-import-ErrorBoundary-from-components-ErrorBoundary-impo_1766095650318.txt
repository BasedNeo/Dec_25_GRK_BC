import { ErrorBoundary } from '@/components/ErrorBoundary';
import { Suspense, lazy } from 'react';

// Add loading fallback component
const LoadingFallback = () => (
  <div className="min-h-screen bg-gradient-to-b from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center">
    <div className="text-center">
      <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-purple-500 mx-auto mb-4"></div>
      <p className="text-white text-lg">Loading...</p>
    </div>
  </div>
);

function App() {
  return (
    <WagmiConfig config={config}>
      <RainbowKitProvider>
        <Router>
          <div className="min-h-screen bg-gray-900">
            <Navbar />
            
            <ErrorBoundary>
              <Suspense fallback={<LoadingFallback />}>
                <Routes>
                  <Route path="/" element={
                    <ErrorBoundary>
                      <Home />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/mint" element={
                    <ErrorBoundary>
                      <Mint />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/marketplace" element={
                    <ErrorBoundary>
                      <Marketplace />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/games" element={
                    <ErrorBoundary>
                      <BasedArcade />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/games/guardian-defense" element={
                    <ErrorBoundary>
                      <GuardianDefense />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/games/guardian-solitaire" element={
                    <ErrorBoundary>
                      <GuardianSolitaire />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/games/asteroid-mining" element={
                    <ErrorBoundary>
                      <AsteroidMining />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/profile/:address" element={
                    <ErrorBoundary>
                      <Profile />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/governance" element={
                    <ErrorBoundary>
                      <Governance />
                    </ErrorBoundary>
                  } />
                  
                  <Route path="/admin" element={
                    <ErrorBoundary>
                      <AdminDashboard />
                    </ErrorBoundary>
                  } />
                </Routes>
              </Suspense>
            </ErrorBoundary>
          </div>
        </Router>
      </RainbowKitProvider>
    </WagmiConfig>
  );
}