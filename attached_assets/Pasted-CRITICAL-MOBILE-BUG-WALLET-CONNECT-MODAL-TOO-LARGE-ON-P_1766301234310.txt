CRITICAL MOBILE BUG: WALLET CONNECT MODAL TOO LARGE ON PHONE

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ISSUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

On mobile devices (iPhone/Android):
- Wallet connection modal opens way too large
- Cannot see buttons to select wallet
- Cannot close modal
- Cannot connect wallet
- Blocks entire screen

This prevents ALL mobile users from connecting wallets.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ROOT CAUSE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Likely causes:
1. Modal width/height not responsive (using fixed px instead of %)
2. Missing viewport meta tag constraints
3. Modal overflow not handled
4. Z-index layering issues
5. Wallet modal library default styles overriding mobile styles


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 1: ADD MOBILE-OPTIMIZED WALLET MODAL STYLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: client/src/index.css or client/src/App.css

Add these critical mobile wallet styles:

/* Mobile Wallet Connect Modal Fix */
@media (max-width: 768px) {
  /* Target RainbowKit modal */
  [data-rk] > div {
    max-width: 90vw !important;
    max-height: 85vh !important;
    width: 90vw !important;
    margin: 0 auto !important;
  }
  
  /* Target modal overlay */
  [data-rk] [role="dialog"] {
    max-width: 90vw !important;
    max-height: 85vh !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Target wallet options container */
  [data-rk] button[type="button"] {
    padding: 12px !important;
    font-size: 14px !important;
    min-height: 48px !important; /* Touch-friendly size */
  }
  
  /* Modal backdrop */
  [data-rk] [data-rk-backdrop] {
    backdrop-filter: blur(8px) !important;
  }
  
  /* Close button */
  [data-rk] button[aria-label*="Close"] {
    position: absolute !important;
    top: 8px !important;
    right: 8px !important;
    width: 32px !important;
    height: 32px !important;
    z-index: 999999 !important;
  }
}

/* Extra small phones */
@media (max-width: 375px) {
  [data-rk] > div {
    max-width: 95vw !important;
    max-height: 80vh !important;
  }
  
  [data-rk] button[type="button"] {
    font-size: 13px !important;
    padding: 10px !important;
  }
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 2: UPDATE WAGMI/RAINBOWKIT CONFIGURATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: client/src/lib/wagmi.ts

Add mobile-specific configuration:

import { getDefaultConfig } from '@rainbow-me/rainbowkit';

export const config = getDefaultConfig({
  // ... existing config
  
  // Add mobile optimizations
  appInfo: {
    appName: 'Based Guardians',
    // Add these mobile-specific settings
    disclaimer: undefined, // Remove disclaimer for cleaner mobile UX
  },
});

// Add custom theme for mobile
export const rainbowKitTheme = {
  radii: {
    actionButton: '8px',
    connectButton: '8px',
    menuButton: '8px',
    modal: '16px',
    modalMobile: '16px', // Rounded corners on mobile
  },
  
  // Mobile-friendly sizing
  fonts: {
    body: 'Orbitron, system-ui, sans-serif',
  },
};


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 3: ADD VIEWPORT META TAG CHECK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: index.html

Verify this meta tag exists and is correct:

<meta 
  name="viewport" 
  content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
/>

DO NOT use maximum-scale=1.0 or user-scalable=no (bad for accessibility)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 4: ADD MOBILE WALLET CONNECT WRAPPER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: Create client/src/components/MobileWalletButton.tsx

import { ConnectButton } from '@rainbow-me/rainbowkit';
import { useState, useEffect } from 'react';

export function MobileWalletButton() {
  const [isMobile, setIsMobile] = useState(false);
  
  useEffect(() => {
    setIsMobile(window.innerWidth < 768);
    
    const handleResize = () => {
      setIsMobile(window.innerWidth < 768);
    };
    
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);
  
  return (
    <ConnectButton.Custom>
      {({
        account,
        chain,
        openAccountModal,
        openChainModal,
        openConnectModal,
        mounted,
      }) => {
        return (
          <div
            {...(!mounted && {
              'aria-hidden': true,
              style: {
                opacity: 0,
                pointerEvents: 'none',
                userSelect: 'none',
              },
            })}
          >
            {(() => {
              if (!mounted || !account || !chain) {
                return (
                  <button
                    onClick={openConnectModal}
                    type="button"
                    className={`
                      px-4 py-2 rounded-lg font-orbitron font-bold
                      bg-gradient-to-r from-cyan-500 to-purple-500
                      hover:from-cyan-400 hover:to-purple-400
                      transition-all duration-200
                      ${isMobile ? 'text-sm w-full' : 'text-base'}
                    `}
                    style={{
                      // Ensure button is touch-friendly on mobile
                      minHeight: isMobile ? '48px' : 'auto',
                      fontSize: isMobile ? '14px' : '16px',
                    }}
                  >
                    Connect Wallet
                  </button>
                );
              }

              return (
                <div className="flex gap-2">
                  <button
                    onClick={openChainModal}
                    type="button"
                    className="px-3 py-2 rounded bg-gray-800 text-sm"
                  >
                    {chain.name}
                  </button>

                  <button
                    onClick={openAccountModal}
                    type="button"
                    className="px-3 py-2 rounded bg-gray-800 text-sm"
                  >
                    {account.displayName}
                  </button>
                </div>
              );
            })()}
          </div>
        );
      }}
    </ConnectButton.Custom>
  );
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 5: UPDATE MAIN APP TO USE MOBILE BUTTON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: client/src/App.tsx or wherever ConnectButton is used

Replace:
<ConnectButton />

With:
<MobileWalletButton />


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 6: ADD EMERGENCY INLINE STYLES FOR MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: client/src/main.tsx (or App.tsx)

Add this useEffect to force modal styling on mount:

useEffect(() => {
  // Force mobile wallet modal styles
  const style = document.createElement('style');
  style.textContent = `
    @media (max-width: 768px) {
      div[role="dialog"][data-rk] {
        max-width: 90vw !important;
        max-height: 85vh !important;
        width: 90vw !important;
        overflow-y: auto !important;
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
      }
    }
  `;
  document.head.appendChild(style);
  
  return () => {
    document.head.removeChild(style);
  };
}, []);


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 7: ADD TOUCH-FRIENDLY SIZING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

File: tailwind.config.js (or wherever theme is configured)

Add touch target sizes:

module.exports = {
  theme: {
    extend: {
      minHeight: {
        'touch': '44px', // Apple's recommended minimum
        'touch-android': '48px', // Android's recommended minimum
      },
      minWidth: {
        'touch': '44px',
        'touch-android': '48px',
      },
    },
  },
};


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIX 8: DEBUG MODAL SIZE ON MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Add console logging to see actual modal size:

useEffect(() => {
  const observer = new MutationObserver(() => {
    const modal = document.querySelector('[data-rk][role="dialog"]');
    if (modal) {
      const rect = modal.getBoundingClientRect();
      console.log('ğŸ” Wallet Modal Size:', {
        width: rect.width,
        height: rect.height,
        viewportWidth: window.innerWidth,
        viewportHeight: window.innerHeight,
        isTooLarge: rect.width > window.innerWidth || rect.height > window.innerHeight,
      });
      
      // Force resize if too large
      if (rect.width > window.innerWidth) {
        (modal as HTMLElement).style.width = '90vw';
      }
      if (rect.height > window.innerHeight) {
        (modal as HTMLElement).style.maxHeight = '85vh';
        (modal as HTMLElement).style.overflowY = 'auto';
      }
    }
  });
  
  observer.observe(document.body, { childList: true, subtree: true });
  
  return () => observer.disconnect();
}, []);


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TESTING PROCEDURE - MOBILE REQUIRED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AFTER FIXES:
1. Open app on actual iPhone or Android device
2. Click "Connect Wallet" button
3. Modal should:
   âœ“ Be 90% of screen width (not overflow)
   âœ“ Be 85% of screen height max (scrollable if needed)
   âœ“ Have visible close button (X in top right)
   âœ“ Show wallet options (MetaMask, Coinbase, WalletConnect)
   âœ“ Buttons are touch-friendly (min 48px tall)
   âœ“ Can scroll if wallet list is long
   âœ“ Can close modal by clicking X or outside
   âœ“ Can select wallet and connect

4. Test on:
   - iPhone SE (small screen)
   - iPhone 14 Pro (normal screen)
   - Android phone
   - iPad (tablet)

5. Test orientations:
   - Portrait âœ“
   - Landscape âœ“


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VERIFICATION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Modal width: max 90vw on mobile
â–¡ Modal height: max 85vh on mobile
â–¡ Close button visible and accessible
â–¡ Wallet options visible and clickable
â–¡ Touch targets min 48px tall
â–¡ Modal scrolls if content too long
â–¡ Can connect to MetaMask mobile
â–¡ Can connect to Coinbase Wallet
â–¡ Can connect via WalletConnect
â–¡ Modal doesn't overflow screen
â–¡ Can close modal easily
â–¡ Works in portrait and landscape


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DELIVERABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Provide:
1. All fixes applied (file paths)
2. Screenshot of wallet modal on mobile (if possible)
3. Confirmation that modal fits on screen
4. Confirmation that wallet connection works on mobile
5. Any remaining mobile issues

CRITICAL: Test on ACTUAL mobile device, not just browser DevTools.